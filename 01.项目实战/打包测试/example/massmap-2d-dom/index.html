<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>massmap-2d初体验</title>
    <link rel="shortcut icon" href="./lib/favicon.ico" />
    <style>
      html {
        font-size: 1vw;
        height: 100%;
        width: 100%;
        overflow: hidden;
      }
      body {
        height: 100%;
        width: 100%;
        overflow: hidden;
        font-size: 14px;
        font-family: "微软雅黑", "Avenir", Helvetica, Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        margin: 0;
      }
    </style>
    <link rel="stylesheet" href="./lib/massmap_2d/massmap.css" />
    <!-- <script src="./lib/massmap_2d/massmap.js"></script> -->
    <!-- <script src="./lib/massmap_2d/massmaptool.js"></script> -->
    <script src="../../dist/massmap.js"></script>
  </head>
  <body>
    <div id="map" style="width: 100%; height: 100%;"></div>
    <script>
      window.onload = function () {
        /* 第一步：生成地图对象 */
        var map = new massmap.Map({
          controls: massmap.control
            .defaults({ attribution: false, zoom: false })
            .extend([]), //隐藏自带的放大缩小控件以及归属控件
          target: "map", //需要挂载div的id
          logo: "false",
          view: new massmap.View({
            center: [113.0129, 28.1943], //中心点经度和纬度
            projection: "EPSG:4326", //设置坐标系
            //center:massmap.proj.transform([113.0129, 28.1943], 'EPSG:4326', 'EPSG:3857'),
            zoom: 10, //地图缩放级别
            minZoom: 7, //最小级别
            //maxZoom: 18.8, //最大级别
          }),
        });

        /* 第二步：准备图层数据 */
        var mapconfig = {
          //配置图层相关的数据
          NodeConfigId: "1-1", //图层id | 选填
          LayerUrl: "http://114.115.247.72:8080/geoserver/gwc/service/wmts", //WMTS服务基地址 | 必填
          LayerParmas: "MassMap:MassMap_Basic_White", // 图层名称 | 必填 （WMTS服务基地址参数）
        };

        /* 第三步：添加图层 */
        map.addLayer(massmap.addLayerWMTS(mapconfig));

        const points = [
          { lng: 117.018261, lat: 36.621984, count: 50 },
          { lng: 117.023332, lat: 36.616532, count: 51 },
          { lng: 117.019787, lat: 36.630658, count: 15 },
          { lng: 117.018455, lat: 36.620921, count: 40 },
          { lng: 117.018843, lat: 36.615516, count: 100 },
          { lng: 117.02546, lat: 36.618503, count: 6 },
          { lng: 117.023289, lat: 36.619989, count: 18 },
          { lng: 117.018162, lat: 36.615051, count: 80 },
          { lng: 117.022039, lat: 36.61782, count: 11 },
          { lng: 117.01387, lat: 36.617253, count: 7 },
          { lng: 117.01773, lat: 36.619426, count: 42 },
          { lng: 117.021107, lat: 36.616445, count: 4 },
          { lng: 117.017521, lat: 36.617943, count: 27 },
          { lng: 117.019812, lat: 36.620836, count: 23 },
          { lng: 117.020682, lat: 36.61463, count: 60 },
          { lng: 117.015424, lat: 36.624675, count: 8 },
          { lng: 117.019242, lat: 36.614509, count: 15 },
          { lng: 117.022766, lat: 36.621408, count: 25 },
          { lng: 117.021674, lat: 36.624396, count: 21 },
          { lng: 117.027268, lat: 36.62267, count: 1 },
          { lng: 117.017721, lat: 36.620034, count: 51 },
          { lng: 117.012456, lat: 36.62667, count: 7 },
          { lng: 117.020432, lat: 36.619114, count: 11 },
          { lng: 117.025013, lat: 36.621611, count: 35 },
          { lng: 117.018733, lat: 36.631037, count: 22 },
          { lng: 117.019336, lat: 36.631134, count: 4 },
          { lng: 117.013557, lat: 36.623254, count: 5 },
          { lng: 117.018367, lat: 36.62943, count: 3 },
          { lng: 117.024312, lat: 36.619621, count: 100 },
          { lng: 117.023874, lat: 36.619447, count: 87 },
          { lng: 117.024225, lat: 36.623091, count: 32 },
          { lng: 117.017801, lat: 36.621854, count: 44 },
          { lng: 117.017129, lat: 36.628227, count: 21 },
          { lng: 117.026426, lat: 36.622286, count: 80 },
          { lng: 117.021597, lat: 36.61948, count: 32 },
          { lng: 117.023895, lat: 36.620787, count: 26 },
          { lng: 117.023563, lat: 36.621197, count: 17 },
          { lng: 117.017982, lat: 36.622547, count: 17 },
          { lng: 117.026126, lat: 36.621938, count: 25 },
          { lng: 117.02326, lat: 36.615782, count: 100 },
          { lng: 117.019239, lat: 36.616759, count: 39 },
          { lng: 117.017185, lat: 36.629123, count: 11 },
          { lng: 117.017237, lat: 36.627518, count: 9 },
          { lng: 117.017784, lat: 36.615754, count: 47 },
          { lng: 117.020193, lat: 36.617061, count: 52 },
          { lng: 117.022735, lat: 36.615619, count: 100 },
          { lng: 117.018495, lat: 36.615958, count: 46 },
          { lng: 117.016292, lat: 36.631166, count: 9 },
          { lng: 117.019916, lat: 36.624055, count: 8 },
          { lng: 117.02189, lat: 36.621308, count: 11 },
          { lng: 117.013765, lat: 36.629376, count: 3 },
          { lng: 117.018232, lat: 36.620348, count: 50 },
          { lng: 117.017554, lat: 36.630511, count: 15 },
          { lng: 117.018568, lat: 36.618161, count: 23 },
          { lng: 117.013461, lat: 36.626306, count: 3 },
          { lng: 117.02232, lat: 36.62161, count: 13 },
          { lng: 117.0174, lat: 36.628616, count: 6 },
          { lng: 117.024679, lat: 36.615499, count: 21 },
          { lng: 117.02171, lat: 36.615738, count: 29 },
          { lng: 117.017836, lat: 36.616998, count: 99 },
          { lng: 117.020755, lat: 36.628001, count: 10 },
          { lng: 117.014077, lat: 36.630655, count: 14 },
          { lng: 117.026092, lat: 36.622995, count: 16 },
          { lng: 117.01535, lat: 36.631054, count: 15 },
          { lng: 117.013022, lat: 36.621895, count: 13 },
          { lng: 117.015551, lat: 36.613373, count: 17 },
          { lng: 117.021191, lat: 36.626572, count: 1 },
          { lng: 117.019612, lat: 36.617119, count: 9 },
          { lng: 117.018237, lat: 36.621337, count: 54 },
          { lng: 117.023776, lat: 36.621919, count: 26 },
          { lng: 117.017694, lat: 36.62536, count: 17 },
          { lng: 117.015377, lat: 36.614137, count: 19 },
          { lng: 117.017434, lat: 36.614394, count: 43 },
          { lng: 117.02588, lat: 36.622622, count: 27 },
          { lng: 117.018345, lat: 36.619467, count: 8 },
          { lng: 117.026883, lat: 36.617171, count: 3 },
          { lng: 117.023877, lat: 36.616659, count: 34 },
          { lng: 117.015712, lat: 36.615613, count: 14 },
          { lng: 117.019869, lat: 36.631416, count: 12 },
          { lng: 117.016956, lat: 36.625377, count: 11 },
          { lng: 117.02066, lat: 36.625017, count: 38 },
          { lng: 117.016244, lat: 36.620215, count: 91 },
          { lng: 117.01929, lat: 36.615908, count: 54 },
          { lng: 117.022116, lat: 36.619658, count: 21 },
          { lng: 117.0183, lat: 36.625015, count: 15 },
          { lng: 117.021969, lat: 36.613527, count: 3 },
          { lng: 117.022936, lat: 36.621854, count: 24 },
          { lng: 117.01905, lat: 36.629217, count: 12 },
          { lng: 117.024579, lat: 36.614987, count: 57 },
          { lng: 117.02076, lat: 36.615251, count: 70 },
          { lng: 117.025867, lat: 36.618989, count: 8 },
          { lng: 112.967539 + 4.1, lat: 28.183103 + 8.35, count: 15 },
        ];

        /* 使用热力图方法 */
        var heatLayer = massmap.thematic.heatmap(points, map);
        /* 设置中心坐标及zoom */
        map.getView().setCenter([112.918261, 28.271984]);
        map.getView().setZoom(16);
      };
    </script>
  </body>
</html>
